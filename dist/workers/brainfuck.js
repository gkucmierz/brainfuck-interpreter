var brainfuckCompiler=function(n){"use strict";function t(n,t,r){return{1:n>1?n+r:r,0:"","-1":n<-1?-n+t:t}[Math.sign(n)]}function r(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function e(n){return Object.keys(n).reduce(function(t,r){return t[r]=n[r],t},{})}function u(n,t){return Object.keys(t||{}).reduce(function(n,r){return n[r]=t[r],n},n)}var i=",.[]<>+-".split(""),o={clean:new RegExp("[^"+r(i.join(""))+"]","g"),value:/[\+\-]+/g,pointer:/[\<\>]+/g,instruction:/[0-9]*./g},c={memorySize:3e4,bits:8,maxInstructions:0};return n.exports.config=function(n){return"undefined"==typeof n?e(c):void u(c,n)},n.exports.compile=function(n,r){var i=u(e(c),r),f=(n+"").replace(o.clean,""),p=f.replace(/\[\-\]/g,"z").replace(o.value,function(n){var r={"+":1,"-":-1},e=n.split("").reduce(function(n,t){return n+r[t]},0);return t(e,"-","+")}).replace(o.pointer,function(n){var r={">":1,"<":-1},e=n.split("").reduce(function(n,t){return n+r[t]},0);return t(e,"<",">")}),a={",":function(){return"m[p]=i();"},".":function(){return"o(m[p]);"},"[":function(){return"while(m[p]){"},"]":function(){return"}"},"<":function(n){return"p-="+n+";while(p<0)p+=l;"},">":function(n){return"p+="+n+";while(p>=l)p-=l;"},"+":function(n){return"m[p]+="+n+";"},"-":function(n){return"m[p]-="+n+";"},z:function(){return"m[p]=0;"}},l=function(n,t){var r=i.maxInstructions>0?"if(!--c)return;":"";return[r,a[n](t)].join("")},s={c:function(n){return n.maxInstructions>0?"let c="+n.maxInstructions+";":""},l:function(n){return["let l=",n.memorySize,";"].join("")},m:function(n){var t={8:"Uint8Array",16:"Uint16Array",32:"Uint32Array"};return["let m=new ",t[n.bits]||t[8],"(l);"].join("")},p:function(){return"let p=0;"},o:function(){return"let o=output||(()=>0);"},i:function(){return"let i=input||(()=>0);"}},m=Object.keys(s).map(function(n){return s[n](i)});(p.match(o.instruction)||[]).map(function(n){var t=+n.slice(0,-1)||1,r=n.slice(-1);m.push(l(r,t))});var v=new Function(["input","output"],m.join(""));return{run:function(n,t){var r=void 0,e=void 0,u=[];return"string"==typeof n?(n=n.split(""),r=function(){var t=n.shift();return t?t.charCodeAt(0):0}):"function"==typeof n&&(r=n),"function"!=typeof t&&(t=function(){return 0}),e=function(n){var r=String.fromCharCode(n);t(n,r),u.push(r)},v(r,e),u.join("")},toString:function(){return v.toString()}}},n.exports}({exports:{}});