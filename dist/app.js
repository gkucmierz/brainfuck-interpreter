"use strict";var _slicedToArray=function(){function n(n,t){var r=[],e=!0,i=!1,u=void 0;try{for(var o,c=n[Symbol.iterator]();!(e=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);e=!0);}catch(n){i=!0,u=n}finally{try{!e&&c.return&&c.return()}finally{if(i)throw u}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("bi",["ui.codemirror"]).controller("mainCtrl",["$scope","$http","$timeout",function(n,t,r){n.ref={code:"",processing:!1},n.editorOptions={lineNumbers:!0,theme:"monokai",lineWrapping:!0,height:"auto"},t.get("dist/examples.json").then(function(t){n.ref.examples=t.data.map(function(n){return{name:n}})},function(n){alert("failed loading examples")}),n.load=function(){t.get("examples/"+n.ref.example.name).then(function(t){n.ref.code=t.data},function(n){alert("failed loading example")})},n.run=function(){n.ref.processing=!0,n.ref.output="";var t=new Worker("dist/workers/worker.js");t.postMessage([n.ref.code,n.ref.input]);var e=[],i=void 0;!function t(){n.ref.output=e.join(""),i=r(t,200)}(),t.onmessage=function(u){var o=u.data.split(","),c=_slicedToArray(o,2),f=c[0],a=c[1];"data"===f?e.push(a):"end"===f&&(n.$apply(function(){n.ref.processing=!1,n.ref.output=e.join("")}),r.cancel(i),t.terminate())}},n.clean=function(){n.ref.input="",n.ref.output=""}}]);